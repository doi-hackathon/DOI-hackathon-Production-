<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>Test</title>
</head>
<body>

<!--<h1>This is just a test page</h1>-->

<!--&lt;!&ndash;<h2>Add a photo</h2>&ndash;&gt;-->
<!--<form th:action="@{/albums/photos/create}" th:method="post" th:object="${photo}">-->
<!--&lt;!&ndash;	<div class="form-group">&ndash;&gt;-->
<!--		<label for="description">Description</label>-->
<!--		<input type="text" name="description" id="description" th:field="*{description}">-->
<!--&lt;!&ndash;	</div>&ndash;&gt;-->
<!--&lt;!&ndash;	<div class="form-group">&ndash;&gt;-->
<!--		<label for="upload"></label>-->
<!--		<button type="button" id="upload" name="upload">Upload a photo</button>-->

<!--		<br>-->
<!--		<input id="stashFilestackURL" name="stashFilestackURL" value="replaceme" th:field="*{link}" type="hidden">-->
<!--		<input type="submit" value="Done">-->
<!--&lt;!&ndash;	</div>&ndash;&gt;-->


<!--</form>-->


	<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<script src="//static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>
	<script th:inline="javascript">
		var apiKey = [[${apiKey}]];
		// alert("Your api key is " + apiKey); //just an alert to make sure it's connected.

		const options = {
			// onUploadDone:
			//     function (res){
			// console.log(res.filesUploaded[0].url);
			//     alert("Log fired " + res.filesUploaded[0].url);
			// }

			onUploadDone:
				function (res) {
				$("#stashFilestackURL").val(res.filesUploaded[0].url);
					// alert("Log fired " + res.filesUploaded[0].url);
				}
			}

		const client = filestack.init(apiKey);

		$("#upload").click(function () {
			client.picker(options).open();
		});
	</script>
</body>
</html>